(this["webpackJsonpgoit-react-hw-08-phonebook"]=this["webpackJsonpgoit-react-hw-08-phonebook"]||[]).push([[2],{104:function(t,e,n){},131:function(t,e,n){"use strict";n.r(e);var r=n(0),c=n.n(r),a=n(28),o=n.n(a),i=n(23),u=n(16),s=n(77),l=(n(104),n(8)),b=n(153),j=n(78),d=n.n(j),f=n(2);function h(t){var e=t.children;return Object(f.jsxs)("div",{className:d.a.container,children:[e,Object(f.jsx)(b.a,{})]})}var O=n(31),p=n(39),g=n(17);function x(t){var e=t.children,n=t.redirectTo,r=void 0===n?"/":n,c=Object(p.a)(t,["children","redirectTo"]),a=Object(u.c)(g.c.getIsLoggedIn);return Object(f.jsx)(l.b,Object(O.a)(Object(O.a)({},c),{},{children:a?e:Object(f.jsx)(l.a,{to:r})}))}function v(t){var e=t.children,n=t.restricted,r=void 0!==n&&n,c=t.redirectTo,a=void 0===c?"/":c,o=Object(p.a)(t,["children","restricted","redirectTo"]),i=Object(u.c)(g.c.getIsLoggedIn)&&r;return Object(f.jsx)(l.b,Object(O.a)(Object(O.a)({},o),{},{children:i?Object(f.jsx)(l.a,{to:a}):e}))}var m=n(157),k=n(158),y=n(159),C={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:900,fontSize:18,color:"#faa346"}};function w(){return Object(f.jsxs)("nav",{children:[Object(f.jsx)(i.b,{to:"/",exact:!0,style:C.link,activeStyle:C.activeLink,children:"Home"}),Object(f.jsx)(i.b,{to:"/contacts",exact:!0,style:C.link,activeStyle:C.activeLink,children:"Contacts"})]})}var I={link:{display:"inline-block",textDecoration:"none",padding:12,fontWeight:900,fontSize:18,color:"#faa346"}};function L(){return Object(f.jsxs)(f.Fragment,{children:[Object(f.jsx)(i.b,{to:"/register",exact:!0,style:I.link,activeStyle:I.activeLink,children:"Autorisation"}),Object(f.jsx)(i.b,{to:"/login",exact:!0,style:I.link,activeStyle:I.activeLink,children:"Login"})]})}var S=n(162),U=n(83),z=n.n(U),F={container:{display:"flex",alignItems:"baseline",color:"#faa346"},name:{fontWeight:700,fontSize:18,marginRight:12},button:{color:"#faa346",fontWeight:700,fontSize:18,textTransform:"capitalize"}};function W(){var t=Object(u.b)(),e=Object(u.c)(g.c.getUsername);return Object(f.jsxs)("div",{style:F.container,children:[Object(f.jsxs)("span",{style:F.name,children:["Your profile, ",e]}),Object(f.jsx)(S.a,{type:"button",style:F.button,endIcon:Object(f.jsx)(z.a,{fontSize:"small"}),onClick:function(){return t(g.a.logOut())},children:Object(f.jsx)("span",{children:"Log out"})})]})}function T(){var t=Object(u.c)(g.c.getIsLoggedIn);return Object(f.jsx)(m.a,{position:"static",children:Object(f.jsx)(k.a,{children:Object(f.jsxs)(y.a,{container:!0,justify:"space-around",alignItems:"center",children:[Object(f.jsx)(y.a,{item:!0,children:Object(f.jsx)(w,{})}),t?Object(f.jsx)(y.a,{item:!0,children:Object(f.jsx)(W,{})}):Object(f.jsx)(y.a,{item:!0,children:Object(f.jsx)(L,{})})]})})})}var R=n(160),V=Object(R.a)((function(){return{appBar:{top:"auto",bottom:0,marginTop:"30px"}}}));function E(){var t=V();return Object(f.jsxs)(c.a.Fragment,{children:[Object(f.jsx)(b.a,{}),Object(f.jsx)(m.a,{position:"sticky",color:"primary",className:t.appBar,children:Object(f.jsx)(k.a,{})})]})}var A=n(86),B=n(161),P=Object(r.lazy)((function(){return Promise.all([n.e(6),n.e(10)]).then(n.bind(null,370))})),q=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(9)]).then(n.bind(null,371))})),_=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(8)]).then(n.bind(null,373))})),D=Object(r.lazy)((function(){return Promise.all([n.e(0),n.e(1),n.e(4),n.e(7)]).then(n.bind(null,375))})),J=Object(A.a)({palette:{primary:{main:"#dbd8d5"},secondary:{main:"#d66a4f"}}});function N(){var t=Object(u.b)(),e=Object(u.c)(g.c.getIsFetchingCurrent);return Object(r.useEffect)((function(){t(g.a.fetchCurrentUser())}),[t]),Object(f.jsx)(h,{children:e?Object(f.jsx)("h1",{children:"Waiting"}):Object(f.jsxs)(B.a,{theme:J,children:[Object(f.jsx)(T,{}),Object(f.jsx)(l.d,{children:Object(f.jsxs)(r.Suspense,{fallback:Object(f.jsx)("p",{children:"Loading..."}),children:[Object(f.jsx)(v,{exact:!0,path:"/",component:P}),Object(f.jsx)(v,{path:"/register",component:q,restricted:!0}),Object(f.jsx)(v,{path:"/login",component:_,redirectTo:"/contacts",restricted:!0}),Object(f.jsx)(x,{path:"/contacts",component:D,redirectTo:"/login"})]})}),Object(f.jsx)(E,{})]})})}var H=n(41),M=n(4),Y=n(27),Z=n(84),G=n.n(Z),K=n(85),Q=n.n(K),X=n(56),$=[].concat(Object(H.a)(Object(M.f)({serializableCheck:{ignoredActions:[Y.a,Y.f,Y.b,Y.c,Y.d,Y.e]}})),[G.a]),tt={key:"auth",storage:Q.a,whitelist:["token"]},et=Object(M.a)({reducer:{auth:Object(Y.g)(tt,g.b),contacts:X.c},middleware:$,devTools:!1}),nt=Object(Y.h)(et);o.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(u.a,{store:et,children:Object(f.jsx)(s.a,{loading:null,persistor:nt,children:Object(f.jsx)(i.a,{children:Object(f.jsx)(N,{})})})})}),document.getElementById("root"))},17:function(t,e,n){"use strict";n.d(e,"b",(function(){return O})),n.d(e,"a",(function(){return h})),n.d(e,"c",(function(){return p}));var r=n(5),c=n(4),a=n(13),o=n.n(a),i=n(26),u=n(21),s=n.n(u);s.a.defaults.baseURL="https://goit-phonebook-api.herokuapp.com";var l,b=function(t){s.a.defaults.headers.common.Authorization="Bearer ".concat(t)},j=function(){s.a.defaults.headers.common.Authorization=""},d=Object(c.c)("auth/register",function(){var t=Object(i.a)(o.a.mark((function t(e,n){var r,c,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,s.a.post("/users/signup",e);case 4:return c=t.sent,a=c.data,b(a.token),t.abrupt("return",a);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()),f=Object(c.c)("auth/login",function(){var t=Object(i.a)(o.a.mark((function t(e,n){var r,c,a;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,s.a.post("/users/login",e);case 4:return c=t.sent,a=c.data,b(a.token),t.abrupt("return",a);case 10:return t.prev=10,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 13:case"end":return t.stop()}}),t,null,[[1,10]])})));return function(e,n){return t.apply(this,arguments)}}()),h={register:d,logOut:Object(c.c)("auth/logout",function(){var t=Object(i.a)(o.a.mark((function t(e,n){var r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return r=n.rejectWithValue,t.prev=1,t.next=4,s.a.post("/users/logout");case 4:j(),t.next=10;break;case 7:return t.prev=7,t.t0=t.catch(1),t.abrupt("return",r(t.t0.message));case 10:case"end":return t.stop()}}),t,null,[[1,7]])})));return function(e,n){return t.apply(this,arguments)}}()),logIn:f,fetchCurrentUser:Object(c.c)("auth/refresh",function(){var t=Object(i.a)(o.a.mark((function t(e,n){var r,c,a,i;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(r=n.getState(),null!==(c=r.auth.token)){t.next=5;break}return console.log("\u0422\u043e\u043a\u0435\u043d\u0430 \u043d\u0435\u0442, \u0443\u0445\u043e\u0434\u0438\u043c \u0438\u0437 fetchCurrentUser"),t.abrupt("return",n.rejectWithValue("need to log in"));case 5:return b(c),t.prev=6,t.next=9,s.a.get("/users/current");case 9:return a=t.sent,i=a.data,t.abrupt("return",i);case 14:t.prev=14,t.t0=t.catch(6),n.rejectWithValue(t.t0.message);case 17:case"end":return t.stop()}}),t,null,[[6,14]])})));return function(e,n){return t.apply(this,arguments)}}())},O=Object(c.e)({name:"auth",initialState:{user:{name:null,email:null},token:null,isLoggedIn:!1,isFetchingCurrentUser:!1},extraReducers:(l={},Object(r.a)(l,h.register.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(r.a)(l,h.logIn.fulfilled,(function(t,e){t.user=e.payload.user,t.token=e.payload.token,t.isLoggedIn=!0})),Object(r.a)(l,h.logOut.fulfilled,(function(t,e){t.user={name:null,email:null},t.token=null,t.isLoggedIn=!1})),Object(r.a)(l,h.fetchCurrentUser.pending,(function(t){t.isFetchingCurrentUser=!0})),Object(r.a)(l,h.fetchCurrentUser.fulfilled,(function(t,e){t.user=e.payload,t.isLoggedIn=!0,t.isFetchingCurrentUser=!1})),Object(r.a)(l,h.fetchCurrentUser.rejected,(function(t){t.isFetchingCurrentUser=!1})),l)}).reducer,p={getIsLoggedIn:function(t){return t.auth.isLoggedIn},getUsername:function(t){return t.auth.user.name},getIsFetchingCurrent:function(t){return t.auth.isFetchingCurrentUser}}},56:function(t,e,n){"use strict";n.d(e,"b",(function(){return m})),n.d(e,"c",(function(){return S})),n.d(e,"d",(function(){return W})),n.d(e,"a",(function(){return v}));var r,c,a=n(13),o=n.n(a),i=n(26),u=n(21),s=n.n(u),l=n(4),b=Object(l.b)("contacts/fetchContactsRequest"),j=Object(l.b)("contacts/fetchContactsSuccess"),d=Object(l.b)("contacts/fetchContactsError"),f=Object(l.b)("contacts/addContactRequest"),h=Object(l.b)("contacts/addContactSuccess"),O=Object(l.b)("contacts/addContactError"),p=Object(l.b)("contacts/deleteContactRequest"),g=Object(l.b)("contacts/deleteContactSuccess"),x=Object(l.b)("contacts/deleteContactError"),v=Object(l.b)("contacts/changeFilter"),m={fetchContacts:function(){return function(){var t=Object(i.a)(o.a.mark((function t(e){var n,r;return o.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return e(b()),t.prev=1,t.next=4,s.a.get("/contacts");case 4:n=t.sent,r=n.data,e(j(r)),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(1),e(d(t.t0));case 12:case"end":return t.stop()}}),t,null,[[1,9]])})));return function(e){return t.apply(this,arguments)}}()},addContact:function(t,e){return function(){var n=Object(i.a)(o.a.mark((function n(r){var c,a,i;return o.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return c={name:t,number:e},r(f()),n.prev=2,n.next=5,s.a.post("/contacts",c);case 5:a=n.sent,i=a.data,r(h(i)),n.next=13;break;case 10:n.prev=10,n.t0=n.catch(2),r(O(n.t0));case 13:case"end":return n.stop()}}),n,null,[[2,10]])})));return function(t){return n.apply(this,arguments)}}()},deleteContact:function(t){return function(){var e=Object(i.a)(o.a.mark((function e(n){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n(p()),e.prev=1,e.next=4,s.a.delete("/contacts/".concat(t));case 4:n(g(t)),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(1),n(x(e.t0));case 10:case"end":return e.stop()}}),e,null,[[1,7]])})));return function(t){return e.apply(this,arguments)}}()}},k=n(5),y=n(41),C=n(12),w=Object(l.d)([],(r={},Object(k.a)(r,j,(function(t,e){return e.payload})),Object(k.a)(r,h,(function(t,e){var n=e.payload;return[].concat(Object(y.a)(t),[n])})),Object(k.a)(r,g,(function(t,e){var n=e.payload;return t.filter((function(t){return t.id!==n}))})),r)),I=Object(l.d)("",Object(k.a)({},v,(function(t,e){return e.payload}))),L=Object(l.d)(!1,(c={},Object(k.a)(c,b,(function(){return!0})),Object(k.a)(c,j,(function(){return!1})),Object(k.a)(c,d,(function(){return!1})),Object(k.a)(c,f,(function(){return!0})),Object(k.a)(c,h,(function(){return!1})),Object(k.a)(c,O,(function(){return!1})),Object(k.a)(c,p,(function(){return!0})),Object(k.a)(c,g,(function(){return!1})),Object(k.a)(c,x,(function(){return!1})),c)),S=Object(C.c)({items:w,filter:I,loading:L}),U=n(43),z=function(t){return t.contacts.items},F=function(t){return t.contacts.filter},W={getContacts:z,getFilter:F,getVisibleContacts:Object(U.a)([z,F],(function(t,e){return function(t){var n=e.toLowerCase();return t.filter((function(t){return t.name.toLowerCase().includes(n)}))}(t)}))}},78:function(t,e,n){t.exports={container:"container_container__3Z1p7"}}},[[131,3,5]]]);
//# sourceMappingURL=main.2f047b57.chunk.js.map